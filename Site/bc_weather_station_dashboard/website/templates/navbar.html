<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">BC Weather and Wildfire</a>
    <div id="date_selector" class="ml-auto">
        <strong><span id="selected_date" class="text-white p-2">Today</span></strong>
        <img class="datepicker-toggle-button" src="../static/calendar_icon.svg" alt="calendar icon" width="30">
        <input type="date" class="datepicker-input">
    </div>
    <script> // should be moved to a separate file when we make one
        const date_input = document.querySelector('.datepicker-input');
        const selected_date = document.querySelector('#selected_date');
        date_input.addEventListener('change', function (e) {
            const date = new Date(e.target.value);
            const adjusted_date = new Date(date.getTime() + date.getTimezoneOffset() * 60 * 1000);
            if (adjusted_date.toDateString() === new Date().toDateString()) {
                selected_date.textContent = "Today";
            } else {
                selected_date.textContent = adjusted_date.toLocaleDateString('en-CA');
            }
        });
    </script>
    <div class="nav-item dropdown">
        <a class="nav-link" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false">
            <img class="avatar avatar-32 bg-light rounded-circle text-white p-1"
                src="https://raw.githubusercontent.com/twbs/icons/main/icons/person.svg" width="35px">
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
            {% if request.user.is_authenticated %}
                <div id="profile_dropdown_logged_in">
                <a class="dropdown-item" href="#">Alerts</a>
                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#feedbackModal">Submit Feedback</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
            </div>
            <!-- If user is not logged in, hide the link -->
            {% else %}
                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#loginModal">Log in</a>
                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#registerModal">Register</a>
            {% endif %}
        </div>
    </div>
</nav>